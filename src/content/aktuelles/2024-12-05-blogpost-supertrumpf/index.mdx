---
tags:
  - "post"
  - "home"
title: "ODIS-Supertrumpf – Mit offenen Daten Berlin erkunden"
description: Mit unserem Kartenspiel ODIS-Supertrumpf laden wir zu einer spielerischen Entdeckungsreise durch Berlins Prognoseräume mit offenen Daten ein.
categories: aktuelles
visible: true
urlText: Zum Blogbeitrag
headerImage:
  src: ./images/ODIS-Supertrumpf-MockUp-20241115-rot.png
  alt: Kartenspiel Mockup
readingTime: 9-12
date: 2024-12-05
---

## Einleitung

Wie funktioniert eigentlich "Berlin"? Was passiert hinter den Kulissen und beeinflusst unser alltägliches Zusammenleben, die Lebensqualität, das Zusammenspiel von bebauter und natürlicher Umwelt? Birgt die städtische Umgebung auch Risiken und Nebenwirkungen? Gibt es unentdeckte Potentiale? Und wie spiegelt sich die Geschichte einer Stadt in ihrem heutigen Erscheinungsbild wider?
Wer durch die Stadt spaziert, kann vieles entdecken. Hinter den sichtbaren Eindrücken verbergen sich jedoch oft unsichtbare Geschichten.
Offene Daten und vermeintlich trockene Zahlen können dabei helfen, städtische Phänomene zu entschlüsseln und in einen größeren Zusammenhang zu stellen. Ob es um das Solarpotential auf den Dächern geht, die Anfahrtszeit der Rettungsdienste, das kulinarische Angebot, die Straßen oder die Luft - jedes Detail ist Teil des komplexen Gefüges einer Stadt.
Das Kartenspiel **ODIS-Supertrumpf** der Open Data Informationsstelle lädt dazu ein Berlin spielerisch und weit über das Offensichtliche hinaus mit Hilfe von offenen Daten zu erkunden.

## ODIS-Supertrumpf

Anders als beim klassischen "Supertrumpf", bei dem es häufig um Pferdestärken und andere Fahrzeugeigenschaften geht, gibt es beim ODIS-Supertrumpf 58 Karten für die 58 Prognoseräume (eine Raumeinheit der Lebensweltlich orientierten Räume [LOR](https://www.berlin.de/sen/sbw/stadtdaten/stadtwissen/sozialraumorientierte-planungsgrundlagen/lebensweltlich-orientierte-raeume/) in Berlin). 
Erfahre was die Prognoseräume in den Kategorien _Straßen mit Frauennamen_, _Solarpotential_, _Luftqualität_, _Versiegelung_, _Schnellimbiss-Anzahl_ und _Rettungsdienst-Anfahrt_ zu bieten haben und wie sie im Vergleich zu anderen abschneiden.
Die Karten werden unter den Spielenden verteilt und eine Person beginnt, indem er:sie eine der sechs Kategorien von der obersten Karte des eigenen Stapels auswählt. Es sollte eine Kategorie sein, in der der vorliegende Prognoseraum besonders glänzt. Je nach Wertung der Daten wird mit dem höchsten oder niedrigsten Wert getrumpft. 
Die Person mit dem besten Wert gewinnt die Runde und erhält die ausgespielten Karten der Mitspieler:innen. Wer am Ende alle (oder die meisten) Karten hat, gewinnt.

Spieler:innen, die die Stärken der eigenen Karten bzw. der Prognoseräume gut kennen, haben einen strategischen Vorteil. Etwas Glück gehört aber natürlich auch dazu.

### Datensätze

Die im ODIS-Supertrumpf verwendeten Daten basieren auf offenen Daten aus verschiedenen Quellen und behandeln folgende Themen:

- **Straßen mit Frauennamen:** Der Prozentsatz der Straßen mit Frauennamen, bemessen an der Gesamtzahl der nach Personen benannten Straßen im jeweiligen Prognoseraum, basiert auf offenen Daten von OpenStreetMap und Wikidata. Der Datensatz ist in einem öffentlichen GitHub-Repository verfügbar. 

- **Solarpotential auf Dächern:** Diese Daten aus dem Energieatlas zeigen, wie viel Solarenergie pro Jahr theoretisch erzeugt werden könnte, wenn alle geeigneten Dächer (basierend auf Neigung, Verschattung etc.) mit Photovoltaik ausgestattet wären. Der gesamte Energiebedarf der Berliner Haushalte liegt bei ca. 4.000 GWh/a.

- **Luftqualität (NO₂):** Der Stickstoffdioxid-Gehalt wird als Durchschnittswert im Jahr 2023 angegeben. Die Daten stammen von der SenMVKU. Der Straßenverkehr ist eine bedeutende NO₂-Quelle. Der zulässige WHO-Grenzwert liegt bei 10 μg/m³.

- **Versiegelungsgrad:** Diese Umweltatlas-Daten zeigen, wie stark der Prognoseraum im Durchschnitt im Jahr 2021 durch Straßen und Bebauung versiegelt war. Straßen etwa haben einen hohen Grad nahe 100%, teilversiegelte Flächen, wie Pflaster, etwa 50%.

- **Anzahl Schnellimbisse:** Die Anzahl der Imbisse pro Kiez basiert auf den offenen Gewerbedaten der IHK Berlin. Sie zeigen, wie viele angemeldete Imbisse es im jeweiligen Prognoseraum gibt und wo sie sich befinden.

- **Anfahrtszeit Rettungsdienst:** Diese Daten stammen von der Berliner Feuerwehr und zeigen die durchschnittlichen Anfahrtszeiten im Fall von kritischen Rettungsdiensteinsätzen. Eine Hilfsfrist von max. 10 Min. ist das Ziel.

<ContentSection class="sm:px-20 w-full h-auto">
  <iframe title="Berliner Straßen mit Frauennamen" aria-label="Locator-Karte" id="datawrapper-chart-ouXj9" src="https://datawrapper.dwcdn.net/ouXj9/1/" scrolling="no" frameborder="0" style="border: none;" width="100%" height="1000" data-external="1"></iframe>
</ContentSection>

<ContentSection class="sm:px-20 w-full h-auto">
  <iframe title="Standorte von Schnellimbissen in Berlin " aria-label="Locator-Karte" id="datawrapper-chart-wKqEk" src="https://datawrapper.dwcdn.net/wKqEk/3/" scrolling="no" frameborder="0" style="border: none;" width="100%" height="1000" data-external="1"></iframe>
</ContentSection>

## Räumliche Datenanalyse

Eine Georeferenzierung bezeichnet die Zuweisung raumbezogener Informationen zu einem Datensatz und ist die Voraussetzung für eine räumliche Datenanalyse. 
Unter den für das Kartenspiel analysierten offenen Datensätzen gab es einige wenige, die bereits eine Zuordnung der Werte zu einer spezifischen Raumeinheit (z.B. LOR) enthielten. In diesen Fällen konnte eine Datenauswertung nach Prognoseraum durch direkte Aggregierung der Werte erfolgen.
Enthielt der offene Datensatz Rauminformationen (z.B. Koordinaten), aber keine direkte Zuordnung nach Prognoseraum, konnte eine räumliche Verschneidung mit den Geometrien der Prognoseräume durchgeführt werden. Dies ermöglichte sowohl die Aggregierung der Werte nach Prognoseraum als auch die kartografische Darstellung.

Der Datensatz zu den Prognoseräumen, der für die Untersuchung der räumlichen Überschneidungen zum Einsatz kam, ist über das [Geoportal Berlin](https://gdi.berlin.de/geonetwork/srv/ger/catalog.search#/metadata/5e05b70b-50d6-4164-b0fd-9cdef4e43559) als WFS- und WMS-Dienst erhältlich. 
WFS (Web Feature Service) und WMS (Web Map Service) sind zwei standardisierte Dienste. Ein WFS-Dienst stellt geografische Daten in Form von Features bereit, die heruntergeladen und weiterverarbeitet werden können. Diese Features enthalten sowohl Attributdaten als auch die zugehörigen Geometrien (z. B. Punkte, Linien oder Polygone), die häufig in einer Spalte namens "geometry" gespeichert sind. Im Fall der Prognoseräume handelt es sich um die Umrisspolygone der Prognoseräume.
Auch mit Hilfe einer GIS-Software (wie z.B. QGIS) können die Geodaten weiter bearbeitet und exploriert werden.

Die Python-Bibliotheken _geopandas_ und _shapely_ sind im Kontext räumlicher Datenanalyse mit Python besonders erwähnenswert und kamen bei der Datenverarbeitung für das Kartenspiel häufig zum Einsatz. Das gewählte Geodatenformat war GeoJSON. 

Die Bearbeitung der offenen Daten für ODIS-Supertrumpf folgte meist in etwa dem gleichen Ansatz: Erst die Vorbereitung der Datensätze für eine räumliche Analyse, dann die Identifizierung der Schnittmenge zwischen den Geodaten aus den offenen Datensätzen und den Prognoseräumen und schließlich die Aggregierung der Werte nach Prognoseraum. Mal wurde die Summe berechnet, mal der Durchschnitt oder der Prozentanteil.
Je nach Fall, gab es einzelne Details zu beachten. 

1. **Auswahl des Koordinatenreferenzsystems (CRS)**

Bei der Arbeit mit Geodaten ist das Koordinatenreferenzsystem (CRS) von entscheidender Bedeutung. Ein CRS definiert, wie geografische Positionen auf einer Karte dargestellt und interpretiert werden. Um eine korrekte und aussagekräftige Analyse der geografischen Daten sicherzustellen, müssen beide Geodatensätze (z.B. Prognoseräume und offener Datensatz) dasselbe CRS verwenden. Stimmen dieses nicht überein, müssen die Daten eines Datensatzes in das CRS des anderen umgerechnet werden.
Die Wahl des geeigneten CRS hängt vom jeweiligen Anwendungsfall ab. Häufig wird das globale geodätische Referenzsystem WGS 84 verwendet, das als Grundlage für viele geografische und projizierte CRS dient. Solche CRS sind durch einen EPSG-Code (European Petroleum Survey Group Code) eindeutig identifizierbar. Sie unterscheiden sich unter anderem darin, dass geografische CRS Koordinaten in Grad (Breiten- und Längengrade) angeben, während projizierte CRS diese in linearen Einheiten wie Metern oder Fuß darstellen.
Bei den Datenauswertungen für den ODIS-Supertrumpf konnte meist EPSG:4326 verwendet werden. Nur in Fällen, in denen es um eine Flächenberechnung geht, wurde auf ein projiziertes CRS zurückgegriffen.

2. **Datenschnittmenge identifizieren**

Nachdem die Koordinatenreferenzsysteme der Datensätze im ODIS-Supertrumpf geprüft und ggf. angeglichen wurden, konnte die Überschneidung der Geometrien des offenen Datensatzes mit denen der Prognoseräume untersucht werden.
Es gibt verschiedene Wege, um die Schnittmenge in Python zu identifizieren. Eine Möglichkeit besteht darin, die Methode _intersects_ zu verwenden.

3. **Aggregierung der Werte nach Prognoseraum**

Die Aggregierung der Werte erfolgte bei fast allen Kategorien im Kartenspiel mit Hilfe einer Funktion. Das Verfahren ermöglichte es, basierend auf der Geometrie eines Prognoseraums, die offenen Daten zu filtern und eine Aggregierung durchzuführen. 
Die Funktion wurde anschließend auf jede Zeile im Geodatensatz der Prognoseräume angewendet. Zum Schluss wurden die aggregierten Werte für jeden Prognoseraum in einem _Data Frame_ gespeichert.

### Erstellung der Locator-Karten mit Datawrapper

Auf den Spielkarten sind, neben der aggregierten Werte zu den sechs Kategorien, die Kartenansichten der einzelnen Prognoseräume sowie allgemeine Informationen zu Fläche und Bevölkerunhgszahl (Stand 2024) abgebildet. Zusätzlich sind die Liniengeometrien der Straßen mit Frauennamen und die Standorte der Schnellimbisse auf den Karten visualisiert. Die 12 verschiedenen Farben der Prognoseraumflächen stehen für die 12 Bezirke in Berlin.
Die hier präsentierten Kartenansichten zu den Prognoseräumen haben wir mit dem kostenlosen Online-Tool Datawrapper und der Datawrapper-API erstellt. Die Verwendung der API-Schnittstelle erlaubt das Vordefinieren der Einstellungen und das Erstellen der 58 Locator-Karten auf einem Schlag.
Um Flächen-, Linien- oder Punktgeometrien als Marker in eine Locator-Karte in Datawrapper einbinden zu können, müssen die Geodaten zunächst als GeoJSON-Datei mit CRS = EPSG:4326 vorliegen. Zudem sollten die Dateien insgesamt nicht größer als 2MB sein und die Anzahl der Punktmarker ist auf max. 100 limitiert ([Weitere Informationen](https://academy.datawrapper.de/article/176-how-to-import-area-line-markers)). 
Da es bei den Standorten der Schnellimbisse mehr als 100 Punktgeometrien gab, haben wir uns hier mit einem Workaround beholfen und die Punkte in Flächen umgewandelt.

Zur Nutzung der API muss zunächst ein API-Token auf der Datawrapper-Webseite als Authentifizierungsschlüssel generiert und die Bibliothek _Datawrapper_ im Skript heruntergeladen werden.
Ein wichtiger Schritt bei der Erstellung der Karten ist die Definition der Karteneinstellungen sowie der einzubindenden Marker. Nach der Erstellung der Locator-Karten mit den Metadaten in einem Zielordner wurden die Marker als Python-Dictionary-Objekte angelegt und als JSON-Format übergeben.

Zum Nachvollziehen der Datenaufbereitung für das Kartenspiel ODIS-Supertrumpf stehen die verarbeiteten Daten und die dazugehörigen Skripte sowie die Datenquellen auf [Github](https://github.com/technologiestiftung/odis-cardgame) zur Verfügung.



