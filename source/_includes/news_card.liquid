{% comment %} 
AVAILABLE VARIABLES:
- title: (required)
- description (required)
- date (required)
- post_link (required)
- post_link_text (optional)
- author (optional)
- theme: one of 'normal' or 'inverted', defaults to 'normal' (optional)
- image_path (optional)
- image_alt_text (optional)
- class (optional)
{% endcomment %}

{% assign card_theme = theme | default: 'normal' | strip %}

{% assign has_accessible_image = image_path and image_alt_text %}

{% capture padding_classes %}px-7 pt-7 pb-10{% endcapture %}

{% capture article_classes %}
  {{ class }}
  relative
  grid items-start
  {% if has_accessible_image %}
    grid-rows-[250px,auto]
  {% else %}
    grid-rows-[0px,auto]
  {% endif %}
  {% if card_theme == 'normal' %}
    bg-bg-alt text-text
    {% if image_path %}
      p-0
    {% else %}
      {{ padding_classes }}
    {% endif %}
  {% else %}
    text-text-inv
    bg-bg-inv bg-blend-luminosity bg-center
    {{ padding_classes }}
  {% endif %}
{% endcapture %}

{% assign link_text = post_link_text | default: 'Zum Beitrag' %}

{% capture content_area_wrapper_classes %}
  {% if card_theme == 'normal' and image_path %}
    {{ padding_classes }}
  {% endif %}
{% endcapture %}

<article class="{{ article_classes }}"
  {% if card_theme == 'inverted' and has_accessible_image %}
    style="background-image: url({{ image_path }});"
  {% endif %}>
  {% if card_theme == 'normal' %}
    {% if has_accessible_image %}
      <div
        style="background-image: url({{ image_path }});"
        class="h-full bg-center bg-cover"
        role="img"
        aria-label="{{ image_alt_text }}"
      ></div>
    {% endif %}
  {% else %}
    {% if has_accessible_image %}
      <div class="sr-only" role="img" aria-label="{{ image_alt_text }}"></div>
      {% render 'news_card/blue_gradient.liquid', class: 'absolute top-0 left-0 w-full h-full' %}
    {% endif %}
  {% endif %}
  <div class="row-start-2 grid gap-3 z-10 {{ content_area_wrapper_classes }}">
    {% render 'news_card/content_area.liquid', title: title, description: description, author: author, date: date, card_theme: card_theme %}
    <div class="w-max">
      {% if card_theme == 'normal' %}
        {% render 'button', href: post_link, text: link_text, variant: 'secondary' %}
      {% else %}
        {% render 'text-link', text: link_text, href: post_link, class: 'text-text-inv' %}
      {% endif %}
      </div>
  </div>
</article>